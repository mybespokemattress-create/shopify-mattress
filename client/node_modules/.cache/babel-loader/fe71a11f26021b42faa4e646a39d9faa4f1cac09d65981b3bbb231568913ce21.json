{"ast":null,"code":"import _objectSpread from\"C:/Users/Angelo/shopify-mattress-processor/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// OrderProcessor.jsx - Fixed API response handling\nimport React,{useState,useEffect}from'react';import{Download,Mail,Edit3,Save,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderProcessor=()=>{var _selectedOrder$lineIt;const[orders,setOrders]=useState([]);const[selectedOrder,setSelectedOrder]=useState(null);const[editMode,setEditMode]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Diagram URL generation function\nconst getDiagramImageUrl=diagramNumber=>{if(!diagramNumber)return null;return\"/images/diagrams/Shape_\".concat(diagramNumber,\"_Caravan_Mattress_Measuring_Diagram.jpg\");};// Transform API data to component format\nconst transformApiOrder=apiOrder=>{var _orderData$order_data,_apiOrder$order_numbe,_apiOrder$order_numbe2,_apiOrder$order_numbe3,_apiOrder$order_numbe4,_orderData$order_data2,_orderData$order_data3,_orderData$order_data4,_orderData$extracted_,_orderData$extracted_2,_lineItems$,_lineItems$2;console.log('Processing order:',apiOrder.order_number);const orderData=apiOrder.order_data||{};// Extract diagram number\nlet diagramNumber=null;const lineItems=(_orderData$order_data=orderData.order_data)===null||_orderData$order_data===void 0?void 0:_orderData$order_data.line_items;if(lineItems&&lineItems[0]&&lineItems[0].properties){const diagramProperty=lineItems[0].properties.find(prop=>prop.name==='Diagram Number');diagramNumber=diagramProperty?diagramProperty.value:null;}// Extract manufacturing options\nlet linkAttachment='One Piece Mattress No Link Required';let deliveryOption='Rolled and Boxed';console.log('EXTRACTING MANUFACTURING OPTIONS');if(lineItems&&lineItems[0]&&lineItems[0].variant_title){const variantTitle=lineItems[0].variant_title;const productTitle=lineItems[0].title||lineItems[0].name||'';console.log('Variant title:',variantTitle);console.log('Product title:',productTitle);// Check for specific selections first\nif(variantTitle.includes('Leave Bolster Loose')){linkAttachment='Leave Bolster Loose';console.log('FOUND: Leave Bolster Loose');}else if(variantTitle.includes('Leave Sections Loose')){linkAttachment='Leave Sections Loose';console.log('FOUND: Leave Sections Loose');}else if(variantTitle.includes('Fabric Link')){linkAttachment='Fabric Link (+£40)';console.log('FOUND: Fabric Link');}else if(variantTitle.includes('Zip-Link')){linkAttachment='Zip-Link (+£40)';console.log('FOUND: Zip-Link');}else{// Determine default based on mattress type\nif(productTitle.toLowerCase().includes('bolster')){linkAttachment='Leave Bolster Loose';console.log('DEFAULT: Bolster mattress - Leave Bolster Loose');}else if(productTitle.toLowerCase().includes('section')){linkAttachment='Leave Sections Loose';console.log('DEFAULT: Sectional mattress - Leave Sections Loose');}else{linkAttachment='One Piece Mattress No Link Required';console.log('DEFAULT: One-piece mattress - One Piece Construction');}}}console.log('Final link attachment:',linkAttachment);console.log('MANUFACTURING EXTRACTION COMPLETE');// Extract store information using mattress_label from webhook\nlet store='UNKNOWN';// First check mattress_label (new format with spaces)\nif(apiOrder.mattress_label==='Motorhome Mattresses')store='MOTO';else if(apiOrder.mattress_label==='My Bespoke Mattresses')store='MYBE';else if(apiOrder.mattress_label==='Caravan Mattresses')store='CARA';// Fallback to old camelCase format for existing orders\nelse if(apiOrder.mattress_label==='MotorhomeMattresses')store='MOTO';else if(apiOrder.mattress_label==='MyBespokeMattresses')store='MYBE';else if(apiOrder.mattress_label==='CaravanMattresses')store='CARA';// Final fallback to order number detection\nelse if((_apiOrder$order_numbe=apiOrder.order_number)!==null&&_apiOrder$order_numbe!==void 0&&_apiOrder$order_numbe.includes('MOTO'))store='MOTO';else if((_apiOrder$order_numbe2=apiOrder.order_number)!==null&&_apiOrder$order_numbe2!==void 0&&_apiOrder$order_numbe2.includes('MYBE'))store='MYBE';else if((_apiOrder$order_numbe3=apiOrder.order_number)!==null&&_apiOrder$order_numbe3!==void 0&&_apiOrder$order_numbe3.includes('CARA'))store='CARA';else if((_apiOrder$order_numbe4=apiOrder.order_number)!==null&&_apiOrder$order_numbe4!==void 0&&_apiOrder$order_numbe4.includes('BESP'))store='MYBE';// Extract measurements\nconst measurements=((_orderData$order_data2=orderData.order_data)===null||_orderData$order_data2===void 0?void 0:(_orderData$order_data3=_orderData$order_data2.extracted_measurements)===null||_orderData$order_data3===void 0?void 0:(_orderData$order_data4=_orderData$order_data3[0])===null||_orderData$order_data4===void 0?void 0:_orderData$order_data4.measurements)||((_orderData$extracted_=orderData.extracted_measurements)===null||_orderData$extracted_===void 0?void 0:(_orderData$extracted_2=_orderData$extracted_[0])===null||_orderData$extracted_2===void 0?void 0:_orderData$extracted_2.measurements)||{};// Build properties object with measurements\nconst properties={};const dimensions=['A','B','C','D','E','F','G'];dimensions.forEach(dim=>{const measurement=measurements[dim];if(measurement){if(typeof measurement==='object'&&'value'in measurement){const displayValue=measurement.unit?\"\".concat(measurement.value,\" \").concat(measurement.unit):measurement.value;properties[\"Dimension \".concat(dim)]=displayValue;}else{properties[\"Dimension \".concat(dim)]=String(measurement);}}else{properties[\"Dimension \".concat(dim)]='';}});return{id:apiOrder.id.toString(),store:store,orderNumber:apiOrder.order_number||'Unknown',customer:{name:apiOrder.customer_name||'Unknown Customer',email:apiOrder.customer_email||''},orderDate:apiOrder.created_date?new Date(apiOrder.created_date).toISOString().split('T')[0]:'',status:apiOrder.processing_status==='received'?'pending_review':'ready_to_send',lineItems:[{sku:orderData.sku||(lineItems===null||lineItems===void 0?void 0:(_lineItems$=lineItems[0])===null||_lineItems$===void 0?void 0:_lineItems$.sku)||'Unknown SKU',productTitle:(lineItems===null||lineItems===void 0?void 0:(_lineItems$2=lineItems[0])===null||_lineItems$2===void 0?void 0:_lineItems$2.title)||'Unknown Product',quantity:1,properties:properties}],supplierCode:orderData.supplierSpecification||'',shapeNumber:orderData.shapeNumber||'',diagramNumber:diagramNumber,shapeDiagramUrl:getDiagramImageUrl(diagramNumber),linkAttachment:linkAttachment,deliveryOption:deliveryOption,totalPrice:apiOrder.total_price,supplierName:apiOrder.supplier_name||orderData.supplierName,rawMeasurements:measurements,notes:apiOrder.notes||'',mattressLabel:apiOrder.mattress_label||'CaravanMattresses'};};// Fetch orders from API - FIXED: Extract orders array from response\nconst fetchOrders=async()=>{try{setLoading(true);setError(null);const response=await fetch('/api/orders');if(!response.ok){throw new Error(\"Failed to fetch orders: \".concat(response.status));}const apiResponse=await response.json();// FIXED: Extract the orders array from the response object\nconst ordersArray=apiResponse.orders||[];const transformedOrders=ordersArray.map(transformApiOrder);setOrders(transformedOrders);}catch(err){console.error('Error fetching orders:',err);setError(err.message);}finally{setLoading(false);}};useEffect(()=>{fetchOrders();const interval=setInterval(fetchOrders,30000);return()=>clearInterval(interval);},[]);const handleOrderSelect=order=>{if((selectedOrder===null||selectedOrder===void 0?void 0:selectedOrder.id)===order.id){setSelectedOrder(null);setEditMode(false);}else{setSelectedOrder(_objectSpread({},order));setEditMode(false);}};const handleEdit=()=>setEditMode(true);// Save function - now includes API call to update backend\nconst handleSave=async()=>{try{const response=await fetch(\"/api/orders/\".concat(selectedOrder.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({processing_status:selectedOrder.status==='ready_to_send'?'processed':'received',notes:selectedOrder.notes,mattress_label:selectedOrder.mattressLabel})});if(!response.ok){throw new Error('Failed to update order');}// Update local state\nsetOrders(orders.map(order=>order.id===selectedOrder.id?selectedOrder:order));setEditMode(false);}catch(err){console.error('Error saving order:',err);alert('Failed to save order changes');}};const handleCancel=()=>{const originalOrder=orders.find(order=>order.id===selectedOrder.id);setSelectedOrder(_objectSpread({},originalOrder));setEditMode(false);};const updateOrderField=(field,value)=>{setSelectedOrder(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const updateCustomerField=(field,value)=>{setSelectedOrder(prev=>_objectSpread(_objectSpread({},prev),{},{customer:_objectSpread(_objectSpread({},prev.customer),{},{[field]:value})}));};const updateMeasurement=(dimension,value)=>{setSelectedOrder(prev=>_objectSpread(_objectSpread({},prev),{},{lineItems:prev.lineItems.map(item=>_objectSpread(_objectSpread({},item),{},{properties:_objectSpread(_objectSpread({},item.properties),{},{[dimension]:value})}))}));};// Generate PDF - now makes actual API call\nconst generatePDF=async()=>{try{console.log('Generating PDF for order:',selectedOrder.orderNumber);const response=await fetch('/api/pdf/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({order:selectedOrder})});if(!response.ok){throw new Error('Failed to generate PDF');}// Create download link\nconst blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"Order_\".concat(selectedOrder.orderNumber,\"_\").concat(selectedOrder.customer.name.replace(/\\s+/g,'_'),\".pdf\");document.body.appendChild(a);a.click();document.body.removeChild(a);window.URL.revokeObjectURL(url);}catch(err){console.error('Error generating PDF:',err);alert('Failed to generate PDF');}};const openZohoMail=()=>{const subject=\"Purchase Order \".concat(selectedOrder.orderNumber);const zohoUrl=\"https://mail.zoho.eu/zm/h/compose?subject=\".concat(encodeURIComponent(subject));window.open(zohoUrl,'_blank');alert('Zoho Mail opened. Please attach PDF and send.');};const filteredOrders=orders.filter(order=>order.orderNumber.toLowerCase().includes(searchTerm.toLowerCase())||order.customer.name.toLowerCase().includes(searchTerm.toLowerCase()));if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-slate-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-slate-600\",children:\"Loading orders...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-slate-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600 mb-4\",children:[\"Error loading orders: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchOrders,className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Retry\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-slate-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-900\",children:\"Bespoke Mattress Order Processor\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600 mt-1\",children:\"Review and process Shopify orders before sending to suppliers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-500\",children:[orders.length,\" orders loaded\",/*#__PURE__*/_jsx(\"button\",{onClick:fetchOrders,className:\"ml-2 px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200\",children:\"Refresh\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b bg-slate-50\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-3\",children:\"Orders Queue\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search orders...\",className:\"w-full px-3 py-2 border rounded-lg\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:filteredOrders.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-slate-500\",children:searchTerm?'No orders match your search':'No orders found'}):filteredOrders.map(order=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b cursor-pointer hover:bg-slate-50 \".concat((selectedOrder===null||selectedOrder===void 0?void 0:selectedOrder.id)===order.id?'bg-blue-50':''),onClick:()=>handleOrderSelect(order),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm\",children:order.orderNumber}),/*#__PURE__*/_jsx(\"span\",{className:\"px-1.5 py-0.5 rounded text-xs font-medium \".concat(order.store==='MOTO'?'bg-purple-100 text-purple-700':order.store==='MYBE'?'bg-green-100 text-green-700':order.store==='CARA'?'bg-orange-100 text-orange-700':'bg-slate-100 text-slate-700'),children:order.store}),order.diagramNumber&&/*#__PURE__*/_jsxs(\"span\",{className:\"px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700\",children:[\"Shape \",order.diagramNumber]}),order.notes&&/*#__PURE__*/_jsx(\"span\",{className:\"px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-700\",children:\"Notes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-600 text-sm\",children:order.customer.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-500 text-xs\",children:order.orderDate}),order.supplierName&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-500 text-xs mt-1\",children:[\"\\u2192 \",order.supplierName]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-500 text-xs mt-1\",children:order.mattressLabel})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(order.status==='ready_to_send'?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'),children:order.status==='ready_to_send'?'Ready':'Review'})})]})},order.id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:selectedOrder?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b bg-slate-50 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Order Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:selectedOrder.orderNumber})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:!editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleEdit,className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generatePDF,className:\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Download PDF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{generatePDF();setTimeout(()=>openZohoMail(),500);},className:\"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Mail,{size:16}),/*#__PURE__*/_jsx(Download,{size:14}),\"Download and Email\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:16}),\"Save\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCancel,className:\"px-4 py-2 bg-slate-500 text-white rounded hover:bg-slate-600 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(X,{size:16}),\"Cancel\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Customer Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:selectedOrder.notes,onChange:e=>updateOrderField('notes',e.target.value),disabled:!editMode,placeholder:\"No customer notes provided\",rows:3,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Mattress Label\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedOrder.mattressLabel,onChange:e=>updateOrderField('mattressLabel',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"CaravanMattresses\",children:\"Caravan Mattresses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MotorhomeMattresses\",children:\"Motorhome Mattresses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MyBespokeMattresses\",children:\"My Bespoke Mattresses\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Order Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Order Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedOrder.orderNumber,onChange:e=>updateOrderField('orderNumber',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Order Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedOrder.orderDate,onChange:e=>updateOrderField('orderDate',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Customer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedOrder.customer.name,onChange:e=>updateCustomerField('name',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:selectedOrder.customer.email,onChange:e=>updateCustomerField('email',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Product Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Supplier Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedOrder.supplierCode,onChange:e=>updateOrderField('supplierCode',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100 font-mono\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:((_selectedOrder$lineIt=selectedOrder.lineItems[0])===null||_selectedOrder$lineIt===void 0?void 0:_selectedOrder$lineIt.quantity)||1,onChange:e=>updateOrderField('quantity',parseInt(e.target.value)),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]})]}),selectedOrder.supplierName&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-slate-600\",children:[\"Assigned to: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedOrder.supplierName})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Measurements & Shape Diagram\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm text-slate-600 mb-3\",children:\"Dimensions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:['Dimension A','Dimension B','Dimension C','Dimension D','Dimension E','Dimension F','Dimension G'].map(dimension=>{var _selectedOrder$lineIt2;const value=((_selectedOrder$lineIt2=selectedOrder.lineItems[0])===null||_selectedOrder$lineIt2===void 0?void 0:_selectedOrder$lineIt2.properties[dimension])||'';const hasValue=value&&value!=='';return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"w-6 text-sm font-medium text-center\",children:dimension.replace('Dimension ','')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:value,onChange:e=>updateMeasurement(dimension,e.target.value),disabled:!editMode,placeholder:\"Not provided\",className:\"flex-1 px-3 py-2 border rounded disabled:bg-slate-100 font-mono \".concat(hasValue?'text-slate-900':'text-slate-400')}),hasValue&&!editMode&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-green-600\",children:\"\\u2713\"})]},dimension);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm text-slate-600 mb-3\",children:\"Additional Specifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Radius of Top Corner\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editMode,placeholder:\"Enter radius\",className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Radius of Bottom Corner\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editMode,placeholder:\"Enter radius\",className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Finished Size Must Not Exceed\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editMode,placeholder:\"Enter maximum size\",className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm text-slate-600 mb-3\",children:[\"Shape Diagram\",selectedOrder.diagramNumber&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium\",children:[\"Shape \",selectedOrder.diagramNumber]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded bg-slate-50\",style:{height:'500px'},children:selectedOrder.shapeDiagramUrl?/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedOrder.shapeDiagramUrl,alt:\"Shape \".concat(selectedOrder.diagramNumber,\" Measuring Diagram\"),className:\"w-full h-full object-contain\",onError:e=>{console.error('Diagram failed to load:',selectedOrder.shapeDiagramUrl);e.target.style.display='none';e.target.nextSibling.style.display='flex';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex-col items-center justify-center text-slate-400 hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mb-1\",children:\"Diagram failed to load\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs\",children:[\"Shape #\",selectedOrder.diagramNumber]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs mt-2 text-slate-300\",children:[\"Check: /images/diagrams/Shape_\",selectedOrder.diagramNumber,\"_Caravan_Mattress_Measuring_Diagram.jpg\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex flex-col items-center justify-center text-slate-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mb-1\",children:selectedOrder.diagramNumber?'Diagram configured but not accessible':'No diagram specified'}),selectedOrder.diagramNumber&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs\",children:[\"Shape #\",selectedOrder.diagramNumber]}),!selectedOrder.diagramNumber&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-2 text-slate-300\",children:\"Diagram number not found in order properties\"})]})}),editMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"flex-1 px-3 py-1 bg-blue-600 text-white rounded text-sm\",children:\"Upload\"}),/*#__PURE__*/_jsx(\"button\",{className:\"flex-1 px-3 py-1 bg-slate-500 text-white rounded text-sm\",children:\"Generate\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Manufacturing Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Link Attachment\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedOrder.linkAttachment,onChange:e=>updateOrderField('linkAttachment',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"One Piece Construction\",children:\"One Piece Mattress No Link Required\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Leave Sections Loose\",children:\"Leave Sections Loose\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Leave Bolster Loose\",children:\"Leave Bolster Loose\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fabric Link (+\\xA340)\",children:\"Fabric Link (+\\xA340)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Zip-Link (+\\xA340)\",children:\"Zip-Link (+\\xA340)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-slate-600 mb-1\",children:\"Delivery Option\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedOrder.deliveryOption,onChange:e=>updateOrderField('deliveryOption',e.target.value),disabled:!editMode,className:\"w-full px-3 py-2 border rounded disabled:bg-slate-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Rolled and Boxed\",children:\"Rolled and Boxed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Full Size Ready to Use\",children:\"Full Size Ready to Use\"})]})]})]})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow border p-8 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-400\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 mb-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-slate-900 mb-2\",children:\"Select an Order\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"Choose an order from the list to view and edit its details.\"})]})})})]})})]});};export default OrderProcessor;","map":{"version":3,"names":["React","useState","useEffect","Download","Mail","Edit3","Save","X","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderProcessor","_selectedOrder$lineIt","orders","setOrders","selectedOrder","setSelectedOrder","editMode","setEditMode","searchTerm","setSearchTerm","loading","setLoading","error","setError","getDiagramImageUrl","diagramNumber","concat","transformApiOrder","apiOrder","_orderData$order_data","_apiOrder$order_numbe","_apiOrder$order_numbe2","_apiOrder$order_numbe3","_apiOrder$order_numbe4","_orderData$order_data2","_orderData$order_data3","_orderData$order_data4","_orderData$extracted_","_orderData$extracted_2","_lineItems$","_lineItems$2","console","log","order_number","orderData","order_data","lineItems","line_items","properties","diagramProperty","find","prop","name","value","linkAttachment","deliveryOption","variant_title","variantTitle","productTitle","title","includes","toLowerCase","store","mattress_label","measurements","extracted_measurements","dimensions","forEach","dim","measurement","displayValue","unit","String","id","toString","orderNumber","customer","customer_name","email","customer_email","orderDate","created_date","Date","toISOString","split","status","processing_status","sku","quantity","supplierCode","supplierSpecification","shapeNumber","shapeDiagramUrl","totalPrice","total_price","supplierName","supplier_name","rawMeasurements","notes","mattressLabel","fetchOrders","response","fetch","ok","Error","apiResponse","json","ordersArray","transformedOrders","map","err","message","interval","setInterval","clearInterval","handleOrderSelect","order","_objectSpread","handleEdit","handleSave","method","headers","body","JSON","stringify","alert","handleCancel","originalOrder","updateOrderField","field","prev","updateCustomerField","updateMeasurement","dimension","item","generatePDF","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","replace","appendChild","click","removeChild","revokeObjectURL","openZohoMail","subject","zohoUrl","encodeURIComponent","open","filteredOrders","filter","className","children","onClick","length","type","placeholder","onChange","e","target","size","setTimeout","disabled","rows","parseInt","_selectedOrder$lineIt2","hasValue","style","height","src","alt","onError","display","nextSibling","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["C:/Users/Angelo/shopify-mattress-processor/client/src/components/OrderProcessor.jsx"],"sourcesContent":["// OrderProcessor.jsx - Fixed API response handling\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Download, Mail, Edit3, Save, X } from 'lucide-react';\r\n\r\nconst OrderProcessor = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Diagram URL generation function\r\n  const getDiagramImageUrl = (diagramNumber) => {\r\n    if (!diagramNumber) return null;\r\n    return `/images/diagrams/Shape_${diagramNumber}_Caravan_Mattress_Measuring_Diagram.jpg`;\r\n  };\r\n\r\n  // Transform API data to component format\r\n  const transformApiOrder = (apiOrder) => {\r\n    console.log('Processing order:', apiOrder.order_number);\r\n    \r\n    const orderData = apiOrder.order_data || {};\r\n    \r\n    // Extract diagram number\r\n    let diagramNumber = null;\r\n    const lineItems = orderData.order_data?.line_items;\r\n    if (lineItems && lineItems[0] && lineItems[0].properties) {\r\n      const diagramProperty = lineItems[0].properties.find(prop => prop.name === 'Diagram Number');\r\n      diagramNumber = diagramProperty ? diagramProperty.value : null;\r\n    }\r\n\r\n    // Extract manufacturing options\r\n    let linkAttachment = 'One Piece Mattress No Link Required';\r\n    let deliveryOption = 'Rolled and Boxed';\r\n    \r\n    console.log('EXTRACTING MANUFACTURING OPTIONS');\r\n    \r\n    if (lineItems && lineItems[0] && lineItems[0].variant_title) {\r\n      const variantTitle = lineItems[0].variant_title;\r\n      const productTitle = lineItems[0].title || lineItems[0].name || '';\r\n      console.log('Variant title:', variantTitle);\r\n      console.log('Product title:', productTitle);\r\n      \r\n      // Check for specific selections first\r\n      if (variantTitle.includes('Leave Bolster Loose')) {\r\n        linkAttachment = 'Leave Bolster Loose';\r\n        console.log('FOUND: Leave Bolster Loose');\r\n      } else if (variantTitle.includes('Leave Sections Loose')) {\r\n        linkAttachment = 'Leave Sections Loose';\r\n        console.log('FOUND: Leave Sections Loose');\r\n      } else if (variantTitle.includes('Fabric Link')) {\r\n        linkAttachment = 'Fabric Link (+£40)';\r\n        console.log('FOUND: Fabric Link');\r\n      } else if (variantTitle.includes('Zip-Link')) {\r\n        linkAttachment = 'Zip-Link (+£40)';\r\n        console.log('FOUND: Zip-Link');\r\n      } else {\r\n        // Determine default based on mattress type\r\n        if (productTitle.toLowerCase().includes('bolster')) {\r\n          linkAttachment = 'Leave Bolster Loose';\r\n          console.log('DEFAULT: Bolster mattress - Leave Bolster Loose');\r\n        } else if (productTitle.toLowerCase().includes('section')) {\r\n          linkAttachment = 'Leave Sections Loose';\r\n          console.log('DEFAULT: Sectional mattress - Leave Sections Loose');\r\n        } else {\r\n          linkAttachment = 'One Piece Mattress No Link Required';\r\n          console.log('DEFAULT: One-piece mattress - One Piece Construction');\r\n        }\r\n      }\r\n    }\r\n    \r\n    console.log('Final link attachment:', linkAttachment);\r\n    console.log('MANUFACTURING EXTRACTION COMPLETE');\r\n\r\n    // Extract store information using mattress_label from webhook\r\n        let store = 'UNKNOWN';\r\n        // First check mattress_label (new format with spaces)\r\n        if (apiOrder.mattress_label === 'Motorhome Mattresses') store = 'MOTO';\r\n        else if (apiOrder.mattress_label === 'My Bespoke Mattresses') store = 'MYBE';\r\n        else if (apiOrder.mattress_label === 'Caravan Mattresses') store = 'CARA';\r\n        // Fallback to old camelCase format for existing orders\r\n        else if (apiOrder.mattress_label === 'MotorhomeMattresses') store = 'MOTO';\r\n        else if (apiOrder.mattress_label === 'MyBespokeMattresses') store = 'MYBE';\r\n        else if (apiOrder.mattress_label === 'CaravanMattresses') store = 'CARA';\r\n        // Final fallback to order number detection\r\n        else if (apiOrder.order_number?.includes('MOTO')) store = 'MOTO';\r\n        else if (apiOrder.order_number?.includes('MYBE')) store = 'MYBE'; \r\n        else if (apiOrder.order_number?.includes('CARA')) store = 'CARA';\r\n        else if (apiOrder.order_number?.includes('BESP')) store = 'MYBE';\r\n        \r\n    // Extract measurements\r\n    const measurements = orderData.order_data?.extracted_measurements?.[0]?.measurements || \r\n                        orderData.extracted_measurements?.[0]?.measurements || {};\r\n    \r\n    // Build properties object with measurements\r\n    const properties = {};\r\n    const dimensions = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\r\n    \r\n    dimensions.forEach(dim => {\r\n      const measurement = measurements[dim];\r\n      if (measurement) {\r\n        if (typeof measurement === 'object' && 'value' in measurement) {\r\n          const displayValue = measurement.unit \r\n            ? `${measurement.value} ${measurement.unit}`\r\n            : measurement.value;\r\n          properties[`Dimension ${dim}`] = displayValue;\r\n        } else {\r\n          properties[`Dimension ${dim}`] = String(measurement);\r\n        }\r\n      } else {\r\n        properties[`Dimension ${dim}`] = '';\r\n      }\r\n    });\r\n\r\n    return {\r\n      id: apiOrder.id.toString(),\r\n      store: store,\r\n      orderNumber: apiOrder.order_number || 'Unknown',\r\n      customer: {\r\n        name: apiOrder.customer_name || 'Unknown Customer',\r\n        email: apiOrder.customer_email || ''\r\n      },\r\n      orderDate: apiOrder.created_date ? new Date(apiOrder.created_date).toISOString().split('T')[0] : '',\r\n      status: apiOrder.processing_status === 'received' ? 'pending_review' : 'ready_to_send',\r\n      lineItems: [{\r\n        sku: orderData.sku || lineItems?.[0]?.sku || 'Unknown SKU',\r\n        productTitle: lineItems?.[0]?.title || 'Unknown Product',\r\n        quantity: 1,\r\n        properties: properties\r\n      }],\r\n      supplierCode: orderData.supplierSpecification || '',\r\n      shapeNumber: orderData.shapeNumber || '',\r\n      diagramNumber: diagramNumber,\r\n      shapeDiagramUrl: getDiagramImageUrl(diagramNumber),\r\n      linkAttachment: linkAttachment,\r\n      deliveryOption: deliveryOption,\r\n      totalPrice: apiOrder.total_price,\r\n      supplierName: apiOrder.supplier_name || orderData.supplierName,\r\n      rawMeasurements: measurements,\r\n      notes: apiOrder.notes || '',\r\n      mattressLabel: apiOrder.mattress_label || 'CaravanMattresses'\r\n    };\r\n  };\r\n\r\n  // Fetch orders from API - FIXED: Extract orders array from response\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response = await fetch('/api/orders');\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to fetch orders: ${response.status}`);\r\n      }\r\n      \r\n      const apiResponse = await response.json();\r\n      \r\n      // FIXED: Extract the orders array from the response object\r\n      const ordersArray = apiResponse.orders || [];\r\n      const transformedOrders = ordersArray.map(transformApiOrder);\r\n      setOrders(transformedOrders);\r\n      \r\n    } catch (err) {\r\n      console.error('Error fetching orders:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n    const interval = setInterval(fetchOrders, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleOrderSelect = (order) => {\r\n    if (selectedOrder?.id === order.id) {\r\n      setSelectedOrder(null);\r\n      setEditMode(false);\r\n    } else {\r\n      setSelectedOrder({ ...order });\r\n      setEditMode(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = () => setEditMode(true);\r\n  \r\n  // Save function - now includes API call to update backend\r\n  const handleSave = async () => {\r\n    try {\r\n      const response = await fetch(`/api/orders/${selectedOrder.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          processing_status: selectedOrder.status === 'ready_to_send' ? 'processed' : 'received',\r\n          notes: selectedOrder.notes,\r\n          mattress_label: selectedOrder.mattressLabel\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to update order');\r\n      }\r\n\r\n      // Update local state\r\n      setOrders(orders.map(order => \r\n        order.id === selectedOrder.id ? selectedOrder : order\r\n      ));\r\n      setEditMode(false);\r\n      \r\n    } catch (err) {\r\n      console.error('Error saving order:', err);\r\n      alert('Failed to save order changes');\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    const originalOrder = orders.find(order => order.id === selectedOrder.id);\r\n    setSelectedOrder({ ...originalOrder });\r\n    setEditMode(false);\r\n  };\r\n\r\n  const updateOrderField = (field, value) => {\r\n    setSelectedOrder(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const updateCustomerField = (field, value) => {\r\n    setSelectedOrder(prev => ({\r\n      ...prev,\r\n      customer: { ...prev.customer, [field]: value }\r\n    }));\r\n  };\r\n\r\n  const updateMeasurement = (dimension, value) => {\r\n    setSelectedOrder(prev => ({\r\n      ...prev,\r\n      lineItems: prev.lineItems.map(item => ({\r\n        ...item,\r\n        properties: { ...item.properties, [dimension]: value }\r\n      }))\r\n    }));\r\n  };\r\n\r\n  // Generate PDF - now makes actual API call\r\n  const generatePDF = async () => {\r\n    try {\r\n      console.log('Generating PDF for order:', selectedOrder.orderNumber);\r\n      \r\n      const response = await fetch('/api/pdf/generate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          order: selectedOrder\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to generate PDF');\r\n      }\r\n\r\n      // Create download link\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `Order_${selectedOrder.orderNumber}_${selectedOrder.customer.name.replace(/\\s+/g, '_')}.pdf`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n    } catch (err) {\r\n      console.error('Error generating PDF:', err);\r\n      alert('Failed to generate PDF');\r\n    }\r\n  };\r\n\r\n  const openZohoMail = () => {\r\n    const subject = `Purchase Order ${selectedOrder.orderNumber}`;\r\n    const zohoUrl = `https://mail.zoho.eu/zm/h/compose?subject=${encodeURIComponent(subject)}`;\r\n    window.open(zohoUrl, '_blank');\r\n    alert('Zoho Mail opened. Please attach PDF and send.');\r\n  };\r\n\r\n  const filteredOrders = orders.filter(order =>\r\n    order.orderNumber.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    order.customer.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-2 text-slate-600\">Loading orders...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-red-600 mb-4\">Error loading orders: {error}</p>\r\n          <button \r\n            onClick={fetchOrders}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-slate-900\">\r\n                Bespoke Mattress Order Processor\r\n              </h1>\r\n              <p className=\"text-slate-600 mt-1\">\r\n                Review and process Shopify orders before sending to suppliers\r\n              </p>\r\n            </div>\r\n            <div className=\"text-sm text-slate-500\">\r\n              {orders.length} orders loaded\r\n              <button \r\n                onClick={fetchOrders}\r\n                className=\"ml-2 px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200\"\r\n              >\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n          \r\n          {/* Orders List */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow border\">\r\n              <div className=\"p-4 border-b bg-slate-50\">\r\n                <h2 className=\"text-lg font-semibold mb-3\">Orders Queue</h2>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search orders...\"\r\n                  className=\"w-full px-3 py-2 border rounded-lg\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"max-h-96 overflow-y-auto\">\r\n                {filteredOrders.length === 0 ? (\r\n                  <div className=\"p-4 text-center text-slate-500\">\r\n                    {searchTerm ? 'No orders match your search' : 'No orders found'}\r\n                  </div>\r\n                ) : (\r\n                  filteredOrders.map((order) => (\r\n                    <div\r\n                      key={order.id}\r\n                      className={`p-4 border-b cursor-pointer hover:bg-slate-50 ${\r\n                        selectedOrder?.id === order.id ? 'bg-blue-50' : ''\r\n                      }`}\r\n                      onClick={() => handleOrderSelect(order)}\r\n                    >\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <span className=\"font-semibold text-sm\">{order.orderNumber}</span>\r\n                            <span className={`px-1.5 py-0.5 rounded text-xs font-medium ${\r\n                              order.store === 'MOTO' ? 'bg-purple-100 text-purple-700' :\r\n                              order.store === 'MYBE' ? 'bg-green-100 text-green-700' :\r\n                              order.store === 'CARA' ? 'bg-orange-100 text-orange-700' :\r\n                              'bg-slate-100 text-slate-700'\r\n                            }`}>\r\n                              {order.store}\r\n                            </span>\r\n                            {order.diagramNumber && (\r\n                              <span className=\"px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700\">\r\n                                Shape {order.diagramNumber}\r\n                              </span>\r\n                            )}\r\n                            {order.notes && (\r\n                              <span className=\"px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-700\">\r\n                                Notes\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"text-slate-600 text-sm\">{order.customer.name}</div>\r\n                          <div className=\"text-slate-500 text-xs\">{order.orderDate}</div>\r\n                          {order.supplierName && (\r\n                            <div className=\"text-slate-500 text-xs mt-1\">→ {order.supplierName}</div>\r\n                          )}\r\n                          <div className=\"text-slate-500 text-xs mt-1\">\r\n                            {order.mattressLabel}\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            order.status === 'ready_to_send' \r\n                              ? 'bg-green-100 text-green-800'\r\n                              : 'bg-yellow-100 text-yellow-800'\r\n                          }`}>\r\n                            {order.status === 'ready_to_send' ? 'Ready' : 'Review'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Order Details */}\r\n          <div className=\"lg:col-span-2\">\r\n            {selectedOrder ? (\r\n              <div className=\"bg-white rounded-lg shadow border\">\r\n                <div className=\"p-4 border-b bg-slate-50 flex justify-between items-center\">\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold\">Order Details</h2>\r\n                    <p className=\"text-sm text-slate-600\">{selectedOrder.orderNumber}</p>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    {!editMode ? (\r\n                      <>\r\n                        <button\r\n                          onClick={handleEdit}\r\n                          className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2\"\r\n                        >\r\n                          <Edit3 size={16} />\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          onClick={generatePDF}\r\n                          className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2\"\r\n                        >\r\n                          <Download size={16} />\r\n                          Download PDF\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            generatePDF();\r\n                            setTimeout(() => openZohoMail(), 500);\r\n                          }}\r\n                          className=\"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 flex items-center gap-2\"\r\n                        >\r\n                          <Mail size={16} />\r\n                          <Download size={14} />\r\n                          Download and Email\r\n                        </button>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <button\r\n                          onClick={handleSave}\r\n                          className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2\"\r\n                        >\r\n                          <Save size={16} />\r\n                          Save\r\n                        </button>\r\n                        <button\r\n                          onClick={handleCancel}\r\n                          className=\"px-4 py-2 bg-slate-500 text-white rounded hover:bg-slate-600 flex items-center gap-2\"\r\n                        >\r\n                          <X size={16} />\r\n                          Cancel\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-6 space-y-6\">\r\n                  \r\n                  {/* Customer Notes */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Customer Notes</h3>\r\n                    <textarea\r\n                      value={selectedOrder.notes}\r\n                      onChange={(e) => updateOrderField('notes', e.target.value)}\r\n                      disabled={!editMode}\r\n                      placeholder=\"No customer notes provided\"\r\n                      rows={3}\r\n                      className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Mattress Label */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Mattress Label</h3>\r\n                    <select\r\n                      value={selectedOrder.mattressLabel}\r\n                      onChange={(e) => updateOrderField('mattressLabel', e.target.value)}\r\n                      disabled={!editMode}\r\n                      className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                    >\r\n                      <option value=\"CaravanMattresses\">Caravan Mattresses</option>\r\n                      <option value=\"MotorhomeMattresses\">Motorhome Mattresses</option>\r\n                      <option value=\"MyBespokeMattresses\">My Bespoke Mattresses</option>\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  {/* Order Information */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Order Information</h3>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Order Number</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={selectedOrder.orderNumber}\r\n                          onChange={(e) => updateOrderField('orderNumber', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Order Date</label>\r\n                        <input\r\n                          type=\"date\"\r\n                          value={selectedOrder.orderDate}\r\n                          onChange={(e) => updateOrderField('orderDate', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Customer Information */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Customer Information</h3>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Customer Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={selectedOrder.customer.name}\r\n                          onChange={(e) => updateCustomerField('name', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Email</label>\r\n                        <input\r\n                          type=\"email\"\r\n                          value={selectedOrder.customer.email}\r\n                          onChange={(e) => updateCustomerField('email', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Product Information */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Product Information</h3>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Supplier Code</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={selectedOrder.supplierCode}\r\n                          onChange={(e) => updateOrderField('supplierCode', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100 font-mono\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Quantity</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={selectedOrder.lineItems[0]?.quantity || 1}\r\n                          onChange={(e) => updateOrderField('quantity', parseInt(e.target.value))}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    {selectedOrder.supplierName && (\r\n                      <div className=\"mt-2 text-sm text-slate-600\">\r\n                        Assigned to: <span className=\"font-medium\">{selectedOrder.supplierName}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Measurements and Shape Diagram */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Measurements & Shape Diagram</h3>\r\n                    \r\n                    <div className=\"grid grid-cols-2 gap-6\">\r\n                      {/* LEFT: Measurements */}\r\n                      <div>\r\n                        <h4 className=\"text-sm text-slate-600 mb-3\">Dimensions</h4>\r\n                        <div className=\"space-y-2\">\r\n                          {['Dimension A', 'Dimension B', 'Dimension C', 'Dimension D', 'Dimension E', 'Dimension F', 'Dimension G'].map((dimension) => {\r\n                            const value = selectedOrder.lineItems[0]?.properties[dimension] || '';\r\n                            const hasValue = value && value !== '';\r\n                            \r\n                            return (\r\n                              <div key={dimension} className=\"flex items-center gap-2\">\r\n                                <label className=\"w-6 text-sm font-medium text-center\">\r\n                                  {dimension.replace('Dimension ', '')}\r\n                                </label>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={value}\r\n                                  onChange={(e) => updateMeasurement(dimension, e.target.value)}\r\n                                  disabled={!editMode}\r\n                                  placeholder=\"Not provided\"\r\n                                  className={`flex-1 px-3 py-2 border rounded disabled:bg-slate-100 font-mono ${\r\n                                    hasValue ? 'text-slate-900' : 'text-slate-400'\r\n                                  }`}\r\n                                />\r\n                                {hasValue && !editMode && (\r\n                                  <span className=\"text-xs text-green-600\">✓</span>\r\n                                )}\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n\r\n                        {/* Additional Specifications */}\r\n                        <div className=\"mt-4 pt-4 border-t\">\r\n                          <h4 className=\"text-sm text-slate-600 mb-3\">Additional Specifications</h4>\r\n                          <div className=\"space-y-2\">\r\n                            <div>\r\n                              <label className=\"block text-sm text-slate-600 mb-1\">Radius of Top Corner</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                disabled={!editMode}\r\n                                placeholder=\"Enter radius\"\r\n                                className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                              />\r\n                            </div>\r\n                            <div>\r\n                              <label className=\"block text-sm text-slate-600 mb-1\">Radius of Bottom Corner</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                disabled={!editMode}\r\n                                placeholder=\"Enter radius\"\r\n                                className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                              />\r\n                            </div>\r\n                            <div>\r\n                              <label className=\"block text-sm text-slate-600 mb-1\">Finished Size Must Not Exceed</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                disabled={!editMode}\r\n                                placeholder=\"Enter maximum size\"\r\n                                className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* RIGHT: Shape Diagram */}\r\n                      <div>\r\n                        <h4 className=\"text-sm text-slate-600 mb-3\">\r\n                          Shape Diagram\r\n                          {selectedOrder.diagramNumber && (\r\n                            <span className=\"ml-2 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium\">\r\n                              Shape {selectedOrder.diagramNumber}\r\n                            </span>\r\n                          )}\r\n                        </h4>\r\n                        <div className=\"border rounded bg-slate-50\" style={{height: '500px'}}>\r\n                          {selectedOrder.shapeDiagramUrl ? (\r\n                            <div className=\"w-full h-full\">\r\n                              <img \r\n                                src={selectedOrder.shapeDiagramUrl} \r\n                                alt={`Shape ${selectedOrder.diagramNumber} Measuring Diagram`}\r\n                                className=\"w-full h-full object-contain\"\r\n                                onError={(e) => {\r\n                                  console.error('Diagram failed to load:', selectedOrder.shapeDiagramUrl);\r\n                                  e.target.style.display = 'none';\r\n                                  e.target.nextSibling.style.display = 'flex';\r\n                                }}\r\n                              />\r\n                              <div className=\"w-full h-full flex-col items-center justify-center text-slate-400 hidden\">\r\n                                <div className=\"text-sm mb-1\">Diagram failed to load</div>\r\n                                <div className=\"text-xs\">Shape #{selectedOrder.diagramNumber}</div>\r\n                                <div className=\"text-xs mt-2 text-slate-300\">\r\n                                  Check: /images/diagrams/Shape_{selectedOrder.diagramNumber}_Caravan_Mattress_Measuring_Diagram.jpg\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"w-full h-full flex flex-col items-center justify-center text-slate-400\">\r\n                              <div className=\"text-sm mb-1\">\r\n                                {selectedOrder.diagramNumber ? 'Diagram configured but not accessible' : 'No diagram specified'}\r\n                              </div>\r\n                              {selectedOrder.diagramNumber && (\r\n                                <div className=\"text-xs\">Shape #{selectedOrder.diagramNumber}</div>\r\n                              )}\r\n                              {!selectedOrder.diagramNumber && (\r\n                                <div className=\"text-xs mt-2 text-slate-300\">\r\n                                  Diagram number not found in order properties\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        {editMode && (\r\n                          <div className=\"flex gap-2 mt-2\">\r\n                            <button className=\"flex-1 px-3 py-1 bg-blue-600 text-white rounded text-sm\">\r\n                              Upload\r\n                            </button>\r\n                            <button className=\"flex-1 px-3 py-1 bg-slate-500 text-white rounded text-sm\">\r\n                              Generate\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Manufacturing Options */}\r\n                  <div className=\"border rounded-lg p-4\">\r\n                    <h3 className=\"font-semibold mb-3\">Manufacturing Options</h3>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Link Attachment</label>\r\n                        <select\r\n                          value={selectedOrder.linkAttachment}\r\n                          onChange={(e) => updateOrderField('linkAttachment', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        >\r\n                          <option value=\"One Piece Construction\">One Piece Mattress No Link Required</option>\r\n                          <option value=\"Leave Sections Loose\">Leave Sections Loose</option>\r\n                          <option value=\"Leave Bolster Loose\">Leave Bolster Loose</option>\r\n                          <option value=\"Fabric Link (+£40)\">Fabric Link (+£40)</option>\r\n                          <option value=\"Zip-Link (+£40)\">Zip-Link (+£40)</option>\r\n                        </select>\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm text-slate-600 mb-1\">Delivery Option</label>\r\n                        <select\r\n                          value={selectedOrder.deliveryOption}\r\n                          onChange={(e) => updateOrderField('deliveryOption', e.target.value)}\r\n                          disabled={!editMode}\r\n                          className=\"w-full px-3 py-2 border rounded disabled:bg-slate-100\"\r\n                        >\r\n                          <option value=\"Rolled and Boxed\">Rolled and Boxed</option>\r\n                          <option value=\"Full Size Ready to Use\">Full Size Ready to Use</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"bg-white rounded-lg shadow border p-8 text-center\">\r\n                <div className=\"text-slate-400\">\r\n                  <svg className=\"mx-auto h-12 w-12 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                  </svg>\r\n                  <h3 className=\"text-lg font-medium text-slate-900 mb-2\">Select an Order</h3>\r\n                  <p className=\"text-slate-500\">Choose an order from the list to view and edit its details.</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderProcessor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}